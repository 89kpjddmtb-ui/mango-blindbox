/**blindbox.wxml**/
<view class="container">
  <view class="progress-bar">
    <view class="progress-step active">âœ“</view>
    <view class="progress-line active"></view>
    <view class="progress-step active">âœ“</view>
    <view class="progress-line active"></view>
    <view class="progress-step active">3</view>
  </view>
  
  <text class="step-title">ç›²ç›’ä¸‰é€‰ä¸€</text>
  <text class="step-subtitle">æ¯ä¸ªç›²ç›’éƒ½è—ç€AIä¸ºä½ æŒ‘é€‰çš„æƒŠå–œ</text>
  
  <!-- ç›²ç›’å±•ç¤ºåŒº -->
  <view class="blindbox-container">
    <view 
      class="blindbox-wrapper {{selectedIndex === index ? 'selected' : ''}} {{revealed ? 'revealed' : ''}}"
      wx:for="{{gifts}}"
      wx:key="id"
      wx:for-index="index"
      bindtap="selectBlindbox"
      data-index="{{index}}"
    >
      <!-- æœªé€‰ä¸­çŠ¶æ€ - ç¥ç§˜ç›²ç›’ -->
      <view class="blindbox-front" wx:if="{{!revealed}}">
        <view class="blindbox-item">
          <view class="question-mark">?</view>
          <view class="blindbox-number">ç›²ç›’ {{index + 1}}</view>
          <view class="keyword-hint">
            <text class="hint-label">çº¿ç´¢ï¼š</text>
            <view class="keyword-tag">{{item.keyword}}</view>
          </view>
        </view>
      </view>
      
      <!-- æ­æ™“åçŠ¶æ€ -->
      <view class="blindbox-back" wx:if="{{revealed}}">
        <view class="gift-revealed {{selectedIndex === index ? 'is-selected' : ''}}">
          <view class="gift-icon">ğŸ</view>
          <view class="gift-name">{{item.name}}</view>
          <view class="gift-price">Â¥{{item.price}}</view>
          
          <view class="selected-badge" wx:if="{{selectedIndex === index}}">
            å·²é€‰ä¸­
          </view>
        </view>
      </view>
      
    </view>
  </view>
  
  <!-- æ“ä½œæŒ‰é’® -->
  <view class="action-area" wx:if="{{!revealed}}">
    <button 
      class="btn-primary {{selectedIndex === null ? 'disabled' : ''}}" 
      bindtap="revealGift"
      disabled="{{selectedIndex === null}}"
    >
      {{selectedIndex === null ? 'å…ˆé€‰ä¸€ä¸ªç›²ç›’' : 'æ­æ™“ç¥ç§˜ç¤¼ç‰©'}}
    </button>
    
    <text class="hint" wx:if="{{selectedIndex !== null}}">
      ç‚¹å‡»æ­æ™“ï¼ŒæŸ¥çœ‹AIä¸ºä½ æŒ‘é€‰çš„æƒŠå–œ
    </text>
  </view>
  
  <view class="action-area" wx:if="{{revealed}}">
    <view class="selected-gift-info">
      <text class="gift-desc">{{gifts[selectedIndex].desc}}</text>
      <view class="platform-tag">
        æ¥æºï¼š{{gifts[selectedIndex].platform}}
      </view>
    </view>
    
    <button class="btn-primary" bindtap="goToPayment">
      ç¡®è®¤å¹¶æ”¯ä»˜ Â¥{{gifts[selectedIndex].price}}
    </button>
    
    <button class="btn-secondary" bindtap="resetSelection">
      é‡æ–°é€‰æ‹©
    </button>
  </view>
</view>
